!function(e){function n(n){for(var r,o,c=n[0],s=n[1],u=n[2],d=0,p=[];d<c.length;d++)o=c[d],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&p.push(a[o][0]),a[o]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);for(l&&l(n);p.length;)p.shift()();return i.push.apply(i,u||[]),t()}function t(){for(var e,n=0;n<i.length;n++){for(var t=i[n],r=!0,c=1;c<t.length;c++){var s=t[c];0!==a[s]&&(r=!1)}r&&(i.splice(n--,1),e=o(o.s=t[0]))}return e}var r={},a={0:0},i=[];function o(n){if(r[n])return r[n].exports;var t=r[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,o),t.l=!0,t.exports}o.m=e,o.c=r,o.d=function(e,n,t){o.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,n){if(1&n&&(e=o(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(o.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)o.d(t,r,function(n){return e[n]}.bind(null,r));return t},o.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(n,"a",n),n},o.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},o.p="";var c=window.webpackJsonp=window.webpackJsonp||[],s=c.push.bind(c);c.push=n,c=c.slice();for(var u=0;u<c.length;u++)n(c[u]);var l=s;i.push([226,1]),t()}({222:function(e,n){e.exports='<div class="row justify-content-center authRow"> <div class="col-9 col-md-5 col-lg-4"> <form class=form-signin action=#> <h3 class="form-signin-heading text-dark">Аутентификация</h3> <label for=inputEmail class=sr-only>Введите Email</label> <input name=email type=email id=inputEmail class=form-control placeholder="Введите Email" required autofocus> <button class="btn btn-lg btn-info btn-block" type=submit id=loginButton>Войти</button> </form> </div> </div>'},223:function(e,n){e.exports='<div class="row justify-content-center authRow"> <div class="col-9 col-md-5 col-lg-4"> <form class=form-signin action=#> <label for=inputCode class=sr-only>Введите код</label> <input name=code type=password id=inputCode class=form-control placeholder="Введите код" required autofocus> <button class="btn btn-lg btn-info btn-block" type=submit id=loginButton>Подтвердить</button> </form> </div> </div>'},224:function(e,n){e.exports="<div class=overflow-x-auto> <table class=table> <tbody> </tbody> </table> </div>"},225:function(e,n){e.exports='<div class=overflow-x-auto> <table class=table> <tbody> <tr class="bg-white rounded shadow-sm"> <th class="text-center pl-4"> <i class="fas fa-file-archive text-info h2 mb-0"></i> </th> <td colspan=2 class=w-100> Создать новый архив </td> <td class="pt-3 pb-3 pr-4"> <i class="fas fa-plus text-success h3 mb-0"></i> </td> </tr> </tbody> </table> </div>'},226:function(e,n,t){t(227),e.exports=t(538)},413:function(e,n,t){},439:function(e,n){},441:function(e,n){},472:function(e,n){},473:function(e,n){},538:function(e,n,t){"use strict";t.r(n);t(413);var r=t(1),a=t.n(r),i=(t(414),t(415),t(416),t(418),t(419),t(18)),o=t.n(i),c=t(93),s=t.n(c),u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=s.a.AES.encrypt(e,n);return t.toString()},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=s.a.AES.decrypt(e,n);return t.toString(s.a.enc.Utf8)};function d(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function p(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?d(Object(t),!0).forEach((function(n){f(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function f(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,n,t,r,a,i,o){try{var c=e[i](o),s=c.value}catch(e){return void t(e)}c.done?n(s):Promise.resolve(s).then(r,a)}function v(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var i=e.apply(n,t);function o(e){m(i,r,a,o,c,"next",e)}function c(e){m(i,r,a,o,c,"throw",e)}o(void 0)}))}}var b,g,y,w={archive:null,path:null,secretKey:null,clipboard:null},x={getArchive:function(){return w.archive},getPath:function(){return w.path},getClipboard:function(){return w.clipboard},getBreadcrumbs:function(){var e="".concat(w.archive.name,":"),n=w.archive.data;return w.path.forEach((function(t){n=n.children[t],e+="/".concat(n.name)})),e},getChild:function(){var e=w.archive.data;return w.path.forEach((function(n){return e=e.children[n]})),e}},k={pushPath:function(e){return w.path.push(e)},popPath:function(){return w.path.pop()},cleanClipboard:function(){return w.clipboard=null},copyChild:function(e){return w.clipboard=JSON.parse(JSON.stringify(x.getChild().children[e]))},renameChild:function(e,n){var t=x.getChild();t.lastModified=(new Date).toISOString(),t.children[e].name=n},deleteChild:function(e){var n=x.getChild();n.lastModified=(new Date).toISOString(),n.children.splice(e,1)},pasteChild:function(e){var n=x.getChild();n.lastModified=(new Date).toISOString(),n.children.splice(e,0,w.clipboard)},createChild:function(e,n,t){var r=x.getChild();r.lastModified=(new Date).toISOString(),r.children.splice(e,0,{name:n,type:t,content:"file"==t?"":null,children:"directory"==t?[]:null,lastModified:(new Date).toISOString()})},cleanArchive:function(){w.archive=null,w.secretKey=null,w.path=null},setChildContent:function(e){var n=x.getChild();n.lastModified=(new Date).toISOString(),n.content=e}},C={signinEmail:function(e){return o.a.post("/api/authentication/signin/email",{email:e})},signinCode:function(e,n){return o.a.post("/api/authentication/signin/code",{email:e,code:n})},signout:function(){return o.a.get("/api/authentication/signout")},fetchArchives:(y=v(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.get("/api/documents/");case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)}))),function(){return y.apply(this,arguments)}),fetchArchive:(g=v(regeneratorRuntime.mark((function e(n,t){var r,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.get("/api/documents/".concat(n));case 2:if(r=e.sent,a=r.data){e.next=6;break}throw new Error("Archive not found!");case 6:if("object"==h(i=JSON.parse(l(a.data,t)))){e.next=9;break}throw new Error("Decrypted data is not object!");case 9:w.archive=p({},a,{data:i}),w.path=[],w.secretKey=t;case 12:case"end":return e.stop()}}),e)}))),function(e,n){return g.apply(this,arguments)}),createArchive:function(e,n){return o.a.post("/api/documents/",{name:e,data:u(JSON.stringify({name:"",type:"directory",children:[]}),n)})},renameArchive:function(e,n){return o.a.put("/api/documents/".concat(e),{name:n})},deleteArchive:function(e){return o.a.delete("/api/documents/".concat(e))},uploadArchive:function(){return o.a.put("/api/documents/".concat(w.archive._id),{name:w.archive.name,data:u(JSON.stringify(w.archive.data),w.secretKey)})},forkArchive:(b=v(regeneratorRuntime.mark((function e(n,t){var r,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.post("/api/documents/",{name:n,data:u(JSON.stringify(w.archive.data),t)});case 2:if(r=e.sent,a=r.data){e.next=6;break}throw new Error("Archive not found!");case 6:if("object"==h(i=JSON.parse(l(a.data,t)))){e.next=9;break}throw new Error("Decrypted data is not object!");case 9:w.archive=p({},a,{data:i}),w.secretKey=t;case 11:case"end":return e.stop()}}),e)}))),function(e,n){return b.apply(this,arguments)})},O={getters:x,mutations:k,actions:C};function P(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var R=function(){function e(n){var t=n.title,r=n.name,i=n.key,o=n.remove,c=n.type,s=n.submit;!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e);var u=a()("#modal");r?u.find("#name").removeClass("d-none").find("input").attr("placeholder",r).val("").prop("required",!0):u.find("#name").addClass("d-none").find("input").prop("required",!1),i?u.find("#key").removeClass("d-none").find("input").attr("placeholder",i).val("").prop("required",!0):u.find("#key").addClass("d-none").find("input").prop("required",!1),o?u.find("#remove").removeClass("d-none").find("input").val(o):u.find("#remove").addClass("d-none"),c?u.find("#type").removeClass("d-none"):u.find("#type").addClass("d-none"),u.find(".modal-title").html(t),u.find("#submit").html(s.label).removeClass().addClass("btn "+s.color),u.modal("show"),this.modal=u}var n,t,r;return n=e,(t=[{key:"hide",value:function(e){var n=this.modal;n.modal("hide").on("hidden.bs.modal",(function(){n.unbind(),e&&e()}))}},{key:"submit",value:function(e){var n=this.modal;n.parent().unbind("submit").submit((function(t){t.preventDefault();var r={name:n.find("#name input").val(),key:n.find("#key input").val(),type:n.find("#type select").val()};n.parent().unbind("submit").submit((function(e){e.preventDefault()})),e&&e(r)}))}}])&&P(n.prototype,t),r&&P(n,r),e}(),S=t(222),j=t.n(S),A=t(223),E=t.n(A);function D(e,n,t,r,a,i,o){try{var c=e[i](o),s=c.value}catch(e){return void t(e)}c.done?n(s):Promise.resolve(s).then(r,a)}var M={render:function(){var e,n=(e=regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=a()('\n    <h6 class="mt-4 font-weight-bold mb-0">\n      '.concat(O.getters.getBreadcrumbs(),'\n    </h6>\n    \n    <div class="mt-4 mb-4 vh-75 w-100">\n      <textarea class="form-control rounded shadow-sm h-100 w-100"></textarea>\n    </div>\n  '))).find("textarea").val(O.getters.getChild().content).bind("input propertychange",(function(){O.mutations.setChildContent(this.value)})),a()("main").html(n);case 3:case"end":return e.stop()}}),e)})),function(){var n=this,t=arguments;return new Promise((function(r,a){var i=e.apply(n,t);function o(e){D(i,r,a,o,c,"next",e)}function c(e){D(i,r,a,o,c,"throw",e)}o(void 0)}))});return function(){return n.apply(this,arguments)}}()},_=t(224),B=t.n(_);function I(e,n,t,r,a,i,o){try{var c=e[i](o),s=c.value}catch(e){return void t(e)}c.done?n(s):Promise.resolve(s).then(r,a)}var J=function(){var e,n=(e=regeneratorRuntime.mark((function e(){var n,t,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=a()(B.a),t=O.getters.getClipboard(),r=O.getters.getChild(),n.prepend('\n    <h6 class="mt-4 font-weight-bold mb-0">\n      '.concat(O.getters.getBreadcrumbs(),"/\n    </h6>\n  ")),t&&(i=a()('<tr class="bg-success rounded shadow-sm"></tr>'),"directory"==t.type?i.append('\n        <th class="text-center pl-4">\n          <i class="fas fa-folder text-white h2 mb-0"></i>\n        </th>\n      '):i.append('\n        <th class="text-center pl-4">\n          <i class="fas fa-file-alt text-white h2 mb-0"></i>\n        </th>\n      '),i.append('\n      <td colspan="5" class="text-white pt-3 pb-3 w-100">\n        '.concat(t.name,"\n      </td>\n    ")),i.append(a()('\n        <td class="pr-4">\n          <i class="fa fa-trash-alt text-white h3 mb-0"></i>\n        </td>\n      ').click((function(){return q()}))),n.find("table tbody").append(i)),r.children.forEach((function(e,r){var i=a()('<tr class="bg-white rounded shadow-sm"></tr>');if("directory"==e.type?i.append('\n        <th class="text-center pl-4">\n          <i class="fas fa-folder text-primary h2 mb-0"></i>\n        </th>\n      '):i.append('\n        <th class="text-center pl-4">\n          <i class="fas fa-file-alt text-primary h2 mb-0"></i>\n        </th>\n      '),i.append(a()('\n        <td class="pt-5 pb-5 h3 mb-0 w-100">\n          '.concat(e.name,'\n          <br>\n          <span class="h6 mb-0">\n            <b>Последнее изменение:</b> ').concat(new Date(e.lastModified).toLocaleString("ru",F),"\n          </span>\n        </td>\n      ")).click((function(){return N(r,e.type)}))),i.append(a()('\n        <td>\n          <i class="far fa-edit text-warning h3 mb-0"></i>\n        </td>\n      ').click((function(){return K(r,e.name)}))),i.append(a()('\n        <td>\n          <i class="far fa-copy text-muted h3 mb-0"></i>\n        </td>\n      ').click((function(){return T(r)}))),i.append(a()('\n        <td>\n          <i class="far fa-trash-alt text-danger h3 mb-0"></i>\n        </td>\n      ').click((function(){return U(r,e.name)}))),t){i.append('\n        <td style="cursor: default;">\n          <i class="far fa-clipboard text-primary h2 mb-0"></i>\n        </td>\n      ');var o=a()('<td class="pr-4"></td>');o.append(a()('\n          <div>\n            <i class="fas fa-level-up-alt h6 mb-0 text-primary"></i>\n          </div>\n        ').click((function(){return z(r)}))),o.append(a()('\n          <div>\n            <i class="fas fa-level-down-alt h6 mb-0 text-primary"></i>\n          </div>\n        ').click((function(){return z(r+1)}))),i.append(o)}else{i.append('\n        <td style="cursor: default;">\n          <i class="far fa-plus-square text-primary h2 mb-0"></i>\n        </td>\n      ');var c=a()('<td class="pr-4"></td>');c.append(a()('\n          <div>\n            <i class="fas fa-level-up-alt h6 mb-0 text-primary"></i>\n          </div>\n        ').click((function(){return L(r)}))),c.append(a()('\n          <div>\n            <i class="fas fa-level-down-alt h6 mb-0 text-primary"></i>\n          </div>\n        ').click((function(){return L(r+1)}))),i.append(c)}n.find("table tbody").append(i)})),r.children.length||(t?n.find("table tbody").append(a()('\n          <tr class="bg-white rounded shadow-sm">\n            <th class="text-center pl-4">\n              <i class="far fa-clipboard text-primary h2 mb-0"></i>\n            </th>\n            <td colspan="5" class="pt-3 pb-3 w-100">Вставить скопированный объект</td>\n            <td class="pr-4">\n              <i class="fas fa-plus text-success h3 mb-0"></i>\n            </td>\n          </tr>\n        ').click((function(){return z(0)}))):n.find("table tbody").append(a()('\n          <tr class="bg-white rounded shadow-sm">\n            <th class="text-center pl-4">\n              <i class="fas fa-certificate text-primary h2 mb-0"></i>\n            </th>\n            <td colspan="5" class="pt-3 pb-3 w-100">Создать новый объект</td>\n            <td class="pr-4">\n              <i class="fas fa-plus text-success h3 mb-0"></i>\n            </td>\n          </tr>\n        ').click((function(){return L(0)})))),a()("main").html(n);case 8:case"end":return e.stop()}}),e)})),function(){var n=this,t=arguments;return new Promise((function(r,a){var i=e.apply(n,t);function o(e){I(i,r,a,o,c,"next",e)}function c(e){I(i,r,a,o,c,"throw",e)}o(void 0)}))});return function(){return n.apply(this,arguments)}}(),q=function(){O.mutations.cleanClipboard(),J()},N=function(e,n){switch(O.mutations.pushPath(e),n){case"directory":J();break;case"file":M.render()}},K=function(e,n){var t=new R({title:"Переименовать объект.",name:n,submit:{label:"Переименовать",color:"btn-warning"}});t.submit((function(n){O.mutations.renameChild(e,n.name),t.hide((function(){return J()}))}))},T=function(e){O.mutations.copyChild(e),J()},U=function(e,n){var t=new R({title:"Удалить объект.",remove:n,submit:{label:"Удалить",color:"btn-danger"}});t.submit((function(){O.mutations.deleteChild(e),t.hide((function(){return J()}))}))},z=function(e){O.mutations.pasteChild(e),O.mutations.cleanClipboard(),J()},L=function(e){var n=new R({title:"Создать объект.",name:"Название объекта",type:!0,submit:{label:"Создать",color:"btn-primary"}});n.submit((function(t){O.mutations.createChild(e,t.name,t.type),n.hide((function(){return J()}))}))},F={year:"numeric",month:"long",day:"numeric",weekday:"long",timezone:"UTC",hour:"numeric",minute:"numeric",second:"numeric"},G={render:J},H=t(225),Q=t.n(H);function V(e,n,t,r,a,i,o){try{var c=e[i](o),s=c.value}catch(e){return void t(e)}c.done?n(s):Promise.resolve(s).then(r,a)}function W(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var i=e.apply(n,t);function o(e){V(i,r,a,o,c,"next",e)}function c(e){V(i,r,a,o,c,"throw",e)}o(void 0)}))}}var X=function(){var e=W(regeneratorRuntime.mark((function e(){var n,t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a()(Q.a),e.next=3,O.actions.fetchArchives();case 3:t=e.sent,n.find("table tr").click((function(){return Z()})),t.reverse().forEach((function(e){var t=a()('<tr class="bg-white rounded shadow-sm"></tr>');t.append('\n      <th class="text-center pl-4">\n        <i class="far fa-file-archive text-info h2 mb-0"></i>\n      </th>        \n    '),t.append(a()('\n        <td class="pt-5 pb-5 h3 mb-0 w-100">\n          '.concat(e.name,'\n          <br>\n          <span class="h6 mb-0">\n            <b>Последнее изменение:</b> ').concat(new Date(e.lastModified).toLocaleString("ru",ne),"\n          </span>\n        </td>       \n      ")).click((function(){return Y(e._id)}))),t.append(a()('\n        <td>\n          <i class="far fa-edit text-warning h3 mb-0"></i>\n        </td>      \n      ').click((function(){return $(e._id,e.name)}))),t.append(a()('\n        <td>\n          <i class="far fa-trash-alt text-danger h3 mb-0"></i>\n        </td>     \n      ').click((function(){return ee(e._id,e.name)}))),n.find("table tbody").prepend(t)})),a()("main").html(n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Y=function(){var e=W(regeneratorRuntime.mark((function e(n){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=new R({title:"Открыть архив.",key:"Ключ шифрования",submit:{label:"Открыть",color:"btn-success"}})).submit(function(){var e=W(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.hide(),e.prev=1,e.next=4,O.actions.fetchArchive(n,r.key);case 4:e.next=9;break;case 6:return e.prev=6,e.t0=e.catch(1),e.abrupt("return",Y(n));case 9:G.render();case 10:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(n){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Z=function(){var e=new R({title:"Создать новый архив.",name:"Название версии",key:"Ключ шифрования",submit:{label:"Создать",color:"btn-primary"}});e.submit(function(){var n=W(regeneratorRuntime.mark((function n(t){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.hide(),n.prev=1,n.next=4,O.actions.createArchive(t.name,t.key);case 4:n.next=9;break;case 6:n.prev=6,n.t0=n.catch(1),alert("Ошибка! Не удалось создать архив");case 9:return n.prev=9,X(),n.finish(9);case 12:case"end":return n.stop()}}),n,null,[[1,6,9,12]])})));return function(e){return n.apply(this,arguments)}}())},$=function(e,n){var t=new R({title:"Переименовать архив.",name:n,submit:{label:"Переименовать",color:"btn-warning"}});t.submit(function(){var n=W(regeneratorRuntime.mark((function n(r){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.hide(),n.prev=1,n.next=4,O.actions.renameArchive(e,r.name);case 4:n.next=9;break;case 6:n.prev=6,n.t0=n.catch(1),alert("Ошибка! Не удалось переименовать архив");case 9:return n.prev=9,X(),n.finish(9);case 12:case"end":return n.stop()}}),n,null,[[1,6,9,12]])})));return function(e){return n.apply(this,arguments)}}())},ee=function(e,n){var t=new R({title:"Удалить архив.",remove:n,submit:{label:"Удалить",color:"btn-danger"}});t.submit(W(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.hide(),n.prev=1,n.next=4,O.actions.deleteArchive(e);case 4:n.next=9;break;case 6:n.prev=6,n.t0=n.catch(1),alert("Ошибка! Не удалось переименовать архив");case 9:return n.prev=9,X(),n.finish(9);case 12:case"end":return n.stop()}}),n,null,[[1,6,9,12]])}))))},ne={year:"numeric",month:"long",day:"numeric",weekday:"long",timezone:"UTC",hour:"numeric",minute:"numeric",second:"numeric"},te={render:X};function re(e,n,t,r,a,i,o){try{var c=e[i](o),s=c.value}catch(e){return void t(e)}c.done?n(s):Promise.resolve(s).then(r,a)}function ae(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var i=e.apply(n,t);function o(e){re(i,r,a,o,c,"next",e)}function c(e){re(i,r,a,o,c,"throw",e)}o(void 0)}))}}var ie=function(){var e=ae(regeneratorRuntime.mark((function e(n){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=a()(E.a)).find("form").prepend(a()('\n      <h6 class="cursor-pointer text-muted text-center mb-3"><u>Отправить новый код</u></h6>  \n    ').click(ae(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.actions.signinEmail(n);case 2:alert("Новый код был отправлен на электронную почту ".concat(n)),ie(n);case 4:case"end":return e.stop()}}),e)}))))),t.find("form").prepend('\n    <h6 class="text-muted text-center mb-3">\n      На электронный адрес\n      <br>\n      <span class="font-weight-bold">'.concat(n,"</span>\n      <br>\n      был отправлен одноразовый код.\n    </h6>\n  ")),t.find("form").submit(function(){var e=ae(regeneratorRuntime.mark((function e(t){var r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r=a()(this).find('input[name="code"]').val(),e.prev=2,e.next=5,O.actions.signinCode(n,r);case 5:te.render(),e.next=23;break;case 8:e.prev=8,e.t0=e.catch(2),i=e.t0.response&&e.t0.response.data&&e.t0.response.data.message,e.t1=i,e.next="Authentication code not sent"===e.t1?14:"Invalid authentication code"===e.t1?17:"Expired authentication code"===e.t1?20:23;break;case 14:return alert("Код не был отправлен"),le.render(),e.abrupt("break",23);case 17:return alert("Введен неверный код"),ie(n),e.abrupt("break",23);case 20:return alert("Код просрочен"),le.render(),e.abrupt("break",23);case 23:case"end":return e.stop()}}),e,this,[[2,8]])})));return function(n){return e.apply(this,arguments)}}()),a()("main").html(t);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),oe={render:ie};function ce(e,n,t,r,a,i,o){try{var c=e[i](o),s=c.value}catch(e){return void t(e)}c.done?n(s):Promise.resolve(s).then(r,a)}function se(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var i=e.apply(n,t);function o(e){ce(i,r,a,o,c,"next",e)}function c(e){ce(i,r,a,o,c,"throw",e)}o(void 0)}))}}var ue=function(){var e=se(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=a()(j.a)).find("form").submit(function(){var e=se(regeneratorRuntime.mark((function e(n){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),t=a()(this).find('input[name="email"]').val(),e.prev=2,e.next=5,O.actions.signinEmail(t);case 5:oe.render(t),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(2),e.t0.response&&e.t0.response.data&&"Incorrect email"==e.t0.response.data.message&&alert("Неверный Email"),ue();case 12:case"end":return e.stop()}}),e,this,[[2,8]])})));return function(n){return e.apply(this,arguments)}}()),a()("main").html(n);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),le={render:ue};function de(e,n,t,r,a,i,o){try{var c=e[i](o),s=c.value}catch(e){return void t(e)}c.done?n(s):Promise.resolve(s).then(r,a)}function pe(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var i=e.apply(n,t);function o(e){de(i,r,a,o,c,"next",e)}function c(e){de(i,r,a,o,c,"throw",e)}o(void 0)}))}}var fe={init:function(){a()("#saveButton").click(pe(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(O.getters.getArchive()){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,O.actions.uploadArchive();case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),alert("При сохранении архива возникла ошибка");case 10:case"end":return e.stop()}}),e,null,[[2,7]])})))),a()("#duplicateButton").click((function(){if(O.getters.getArchive()){var e=new R({title:"Сохранить как новый архив (дублировать).",name:"Название версии",key:"Ключ шифрования",submit:{label:"Сохранить",color:"btn-primary"}});e.submit(function(){var n=pe(regeneratorRuntime.mark((function n(t){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.hide(),n.prev=1,n.next=4,O.actions.forkArchive(t.name,t.key);case 4:n.next=9;break;case 6:n.prev=6,n.t0=n.catch(1),alert("Ошибка! Не удалось сохранить (дублировать) архив");case 9:n.prev=9,n.t1=O.getters.getChild().type,n.next="directory"===n.t1?13:"file"===n.t1?15:17;break;case 13:return G.render(),n.abrupt("break",17);case 15:return M.render(),n.abrupt("break",17);case 17:return n.finish(9);case 18:case"end":return n.stop()}}),n,null,[[1,6,9,18]])})));return function(e){return n.apply(this,arguments)}}())}})),a()("#backButton").click((function(){O.getters.getPath()&&(O.getters.getPath().length?(O.mutations.popPath(),G.render()):(O.mutations.cleanArchive(),te.render()))})),a()("#signouthButton").click(pe(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.actions.signout();case 2:le.render();case 3:case"end":return e.stop()}}),e)}))))},processing:a()("#processing")};o.a.interceptors.request.use((function(e){return fe.processing.fadeIn(),e}),(function(e){return fe.processing.fadeOut(),Promise.reject(e)})),o.a.interceptors.response.use((function(e){return fe.processing.fadeOut(),e}),(function(e){return fe.processing.fadeOut(),e.response&&401==e.response.status&&"/api/authentication/signin/email"!==e.response.config.url&&"/api/authentication/signin/code"!==e.response.config.url&&le.render(),Promise.reject(e)})),fe.init(),te.render()}});